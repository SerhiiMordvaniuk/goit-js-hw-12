{"version":3,"file":"index.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\"use strict\"\n\n\nexport function createGallery(arr) {\n    return arr.map(item => \n        `\n            <li class=\"gallery-item\">\n                <a href=\"${item.largeImageURL}\">\n                <img class=\"galerry-img\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" width=\"360\"/>\n                </a>\n                <div class=\"galerry-txt\">\n                    <div class=\"item-txt\">\n                        <p>Likes</p>\n                        <span class=\"item-span\">${item.likes}</span>\n                    </div>\n                    <div class=\"item-txt\">\n                        <p>Views</p>\n                        <span class=\"item-span\">${item.views}</span>\n                    </div>\n                    <div class=\"item-txt\">\n                        <p>Comments</p>\n                        <span class=\"item-span\">${item.comments}</span>\n                    </div>\n                    <div class=\"item-txt\">\n                        <p>Downloads</p>\n                        <span class=\"item-span\">${item.downloads}</span>\n                    </div>\n                </div>\n            </li>\n        `\n    ).join(\"\")\n}\n\n\n\n","\"use strict\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from 'axios';\n\n\nimport { createGallery } from './render-function'\n\n\nconst API_KEY = \"46809908-9f97c0ef37b027eaa1f813844\";\nconst loader = document.querySelector('.loader'); \nconst gallery = document.querySelector(\".gallery-list\");\nconst loadBtn = document.querySelector('.load-btn')\n\n\n\nlet page = 1;\nlet lightbox;\nlet totalPage;\n\n\nfunction endSearch() {\n    iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'center',\n        color: 'green',\n        messageColor: \"black\",\n        close: true,\n        timeout: 2000,\n        progressBar: true,\n        iconColor: \"white\",\n        icon: false,\n        maxWidth: \"300\"\n    });\n}\n\nexport function searchImage() {\n    page = 1;\n\n    loader.classList.remove('unvisible');\n    loadBtn.classList.add('unvisible');\n\n    gallery.innerHTML = \"\";\n    \n    createList()\n}\n\nasync function createList() {\n    \n\n        let params = new URLSearchParams({\n        key: API_KEY,\n        q: `${localStorage.getItem(\"search\")}`,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: page,\n    })\n    await axios.get(`https://pixabay.com/api/?${params}`)\n        .then(data => {\n            totalPage = Math.ceil(data.data.totalHits / 15) ;\n            \n            if (data.data.hits.length == 0) {\n                loader.classList.add('unvisible');\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'center',\n                    color: '#ca0000',\n                    messageColor: \"white\",\n                    close: true,\n                    timeout: 2000,\n                    progressBar: true,\n                    iconColor: \"white\",\n                    icon: false,\n                    maxWidth: \"300\"\n                });\n            }\n            else {\n                loader.classList.add('unvisible');\n                gallery.insertAdjacentHTML(\"beforeend\", createGallery(data.data.hits));\n                if (data.data.hits.length < 15) {\n                endSearch()\n                }\n                else {\n                loadBtn.classList.remove('unvisible');\n                }\n            }\n        })\n        .catch(error => {\n            loader.classList.add('unvisible');\n            iziToast.error({\n                message: `Oooops, error. Please try again!`,\n                position: 'center',\n                color: '#ca0000',\n                messageColor: \"white\",\n                close: true,\n                timeout: 2000,\n                progressBar: true,\n                iconColor: \"white\",\n                icon: false,\n                maxWidth: \"300\"\n            })\n        })\n    \n    lightbox = new SimpleLightbox('.gallery-item a', {\n        disableScroll: false,\n        overlayOpacity: 0.9,\n        disableRightClick: true,\n        disableScroll: false\n    });\n}\n\n\nloadBtn.addEventListener(\"click\", async () => {\n    loader.classList.remove('unvisible');\n    loadBtn.classList.add(\"unvisible\")\n\n    lightbox.destroy()\n    page++;\n\n    await createList()\n    \n    if (page >= totalPage) { \n        loadBtn.classList.add(\"unvisible\")\n        endSearch()\n    }\n\n    const item = document.querySelector(\".gallery-item\")\n    const itemHeight = item.getBoundingClientRect().height;\n    \n    window.scrollBy({\n        left: 0,\n        top: itemHeight * 2,\n        behavior: \"smooth\"\n    })   \n})\n\n","\"use strict\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { searchImage } from './js/pixabay-api'\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".input\");\nlet search = null;\n\nconst galleryContainer = document.querySelector(\".gallery\")\n\n\nform.addEventListener(\"submit\", (event) => {\n    event.preventDefault()\n    localStorage.removeItem(\"search\")\n    search = input.value\n    if (search.trim() === \"\") {\n        iziToast.error({\n                message: 'Enter your query',\n                position: 'center',\n                color: '#ca0000',\n                messageColor: \"white\",\n                close: false,\n                timeout: 1000,\n                progressBar: false,\n                iconColor: \"white\",\n                con: false,z\n            });\n    }\n    else {\n        localStorage.setItem(\"search\", search )\n        searchImage()\n    }\n    form.reset()\n});\n\n"],"names":["createGallery","arr","item","API_KEY","loader","gallery","loadBtn","page","lightbox","totalPage","endSearch","iziToast","searchImage","createList","params","axios","data","error","SimpleLightbox","itemHeight","form","input","search","event"],"mappings":"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"}